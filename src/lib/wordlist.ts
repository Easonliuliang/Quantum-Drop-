// 2048 simple, memorable English words for friend codes
// Selected for: easy to spell, no ambiguity, globally recognizable

export const WORDLIST = [
  // Animals (200)
  'ant', 'ape', 'bat', 'bee', 'bird', 'bear', 'bull', 'calf', 'cat', 'clam',
  'crab', 'crow', 'deer', 'dog', 'dove', 'duck', 'eagle', 'eel', 'elk', 'fish',
  'fly', 'fox', 'frog', 'goat', 'hawk', 'hen', 'horse', 'jay', 'lamb', 'lion',
  'mole', 'moth', 'mouse', 'mule', 'owl', 'ox', 'pig', 'rat', 'seal', 'shark',
  'sheep', 'slug', 'snail', 'snake', 'swan', 'tiger', 'toad', 'wasp', 'whale', 'wolf',
  'worm', 'zebra', 'panda', 'koala', 'camel', 'cobra', 'coral', 'crane', 'dolphin', 'dragon',
  'falcon', 'ferret', 'gecko', 'giraffe', 'gorilla', 'hamster', 'hippo', 'husky', 'iguana', 'jaguar',
  'jellyfish', 'kangaroo', 'leopard', 'lizard', 'lobster', 'lynx', 'mammoth', 'mantis', 'meerkat', 'monkey',
  'moose', 'octopus', 'orca', 'osprey', 'otter', 'panther', 'parrot', 'pelican', 'penguin', 'phoenix',
  'pigeon', 'pony', 'puma', 'rabbit', 'raccoon', 'raven', 'rhino', 'robin', 'salmon', 'scorpion',

  // Colors (50)
  'red', 'blue', 'green', 'gold', 'pink', 'gray', 'black', 'white', 'brown', 'orange',
  'purple', 'silver', 'yellow', 'cyan', 'lime', 'navy', 'olive', 'teal', 'coral', 'crimson',
  'ivory', 'jade', 'ruby', 'amber', 'azure', 'beige', 'bronze', 'copper', 'cream', 'indigo',
  'khaki', 'lavender', 'lemon', 'magenta', 'maroon', 'mint', 'pearl', 'peach', 'plum', 'rose',
  'rust', 'sage', 'sand', 'scarlet', 'tan', 'turquoise', 'violet', 'wine', 'slate', 'charcoal',

  // Nature (200)
  'moon', 'sun', 'star', 'sky', 'rain', 'snow', 'wind', 'fire', 'ice', 'sand',
  'rock', 'hill', 'lake', 'river', 'ocean', 'wave', 'cloud', 'storm', 'fog', 'mist',
  'dawn', 'dusk', 'noon', 'night', 'day', 'spring', 'summer', 'autumn', 'winter', 'forest',
  'tree', 'leaf', 'root', 'seed', 'flower', 'grass', 'moss', 'vine', 'bush', 'grove',
  'field', 'meadow', 'valley', 'canyon', 'cliff', 'cave', 'island', 'beach', 'coast', 'shore',
  'peak', 'ridge', 'slope', 'plain', 'desert', 'jungle', 'marsh', 'pond', 'creek', 'brook',
  'falls', 'spring', 'geyser', 'volcano', 'glacier', 'reef', 'bay', 'gulf', 'harbor', 'delta',
  'oasis', 'dune', 'boulder', 'pebble', 'crystal', 'gem', 'diamond', 'emerald', 'sapphire', 'quartz',
  'oak', 'pine', 'maple', 'birch', 'cedar', 'palm', 'willow', 'bamboo', 'fern', 'lotus',
  'tulip', 'daisy', 'orchid', 'lily', 'iris', 'poppy', 'clover', 'ivy', 'holly', 'acorn',

  // Actions (200)
  'run', 'jump', 'fly', 'swim', 'walk', 'climb', 'dance', 'sing', 'play', 'rest',
  'wake', 'sleep', 'dream', 'think', 'learn', 'teach', 'read', 'write', 'draw', 'paint',
  'build', 'make', 'create', 'design', 'craft', 'forge', 'mold', 'shape', 'carve', 'weave',
  'grow', 'bloom', 'rise', 'fall', 'flow', 'drift', 'float', 'glide', 'soar', 'dive',
  'spin', 'turn', 'twist', 'roll', 'flip', 'slide', 'swing', 'sway', 'bounce', 'leap',
  'dash', 'rush', 'zoom', 'flash', 'spark', 'glow', 'shine', 'gleam', 'blaze', 'flare',
  'calm', 'cool', 'warm', 'heat', 'chill', 'freeze', 'melt', 'thaw', 'dry', 'soak',
  'fill', 'empty', 'open', 'close', 'lock', 'free', 'bind', 'link', 'join', 'split',
  'mix', 'blend', 'fuse', 'merge', 'fold', 'wrap', 'pack', 'send', 'give', 'take',
  'find', 'seek', 'hunt', 'catch', 'grab', 'hold', 'keep', 'save', 'guard', 'shield',

  // Adjectives (200)
  'swift', 'quick', 'fast', 'slow', 'calm', 'wild', 'tame', 'bold', 'shy', 'brave',
  'kind', 'wise', 'smart', 'keen', 'sharp', 'soft', 'hard', 'firm', 'gentle', 'rough',
  'smooth', 'flat', 'round', 'square', 'long', 'short', 'tall', 'small', 'big', 'huge',
  'tiny', 'vast', 'wide', 'narrow', 'deep', 'high', 'low', 'near', 'far', 'close',
  'bright', 'dark', 'light', 'heavy', 'thick', 'thin', 'dense', 'sparse', 'full', 'empty',
  'rich', 'pure', 'fresh', 'clean', 'clear', 'crisp', 'cool', 'warm', 'hot', 'cold',
  'dry', 'wet', 'damp', 'moist', 'frozen', 'molten', 'solid', 'liquid', 'misty', 'foggy',
  'sunny', 'cloudy', 'rainy', 'windy', 'stormy', 'snowy', 'icy', 'dusty', 'sandy', 'rocky',
  'grassy', 'leafy', 'woody', 'mossy', 'thorny', 'silky', 'woolly', 'furry', 'scaly', 'feathery',
  'golden', 'silver', 'bronze', 'iron', 'steel', 'velvet', 'satin', 'linen', 'cotton', 'wooden',

  // Objects (200)
  'key', 'lock', 'door', 'gate', 'wall', 'roof', 'floor', 'step', 'path', 'road',
  'bridge', 'tower', 'castle', 'fort', 'camp', 'tent', 'cabin', 'lodge', 'hut', 'barn',
  'mill', 'well', 'pump', 'pipe', 'tank', 'drum', 'bell', 'horn', 'flag', 'sail',
  'mast', 'deck', 'hull', 'anchor', 'rope', 'chain', 'wheel', 'gear', 'lever', 'spring',
  'bolt', 'nail', 'screw', 'pin', 'clip', 'hook', 'ring', 'band', 'loop', 'knot',
  'box', 'case', 'chest', 'trunk', 'bag', 'pack', 'pouch', 'pocket', 'slot', 'shelf',
  'desk', 'chair', 'bench', 'table', 'bed', 'couch', 'lamp', 'clock', 'mirror', 'frame',
  'book', 'page', 'note', 'card', 'stamp', 'coin', 'token', 'badge', 'medal', 'crown',
  'sword', 'shield', 'armor', 'helm', 'bow', 'arrow', 'spear', 'staff', 'wand', 'orb',
  'cup', 'bowl', 'plate', 'pot', 'pan', 'jar', 'jug', 'vase', 'bottle', 'flask',

  // Food (100)
  'apple', 'grape', 'lemon', 'lime', 'mango', 'melon', 'olive', 'peach', 'pear', 'plum',
  'berry', 'cherry', 'fig', 'kiwi', 'coconut', 'banana', 'orange', 'papaya', 'guava', 'date',
  'bread', 'cake', 'candy', 'cheese', 'cream', 'honey', 'sugar', 'salt', 'pepper', 'spice',
  'rice', 'corn', 'wheat', 'oat', 'bean', 'pea', 'nut', 'seed', 'grain', 'flour',
  'soup', 'stew', 'sauce', 'gravy', 'broth', 'juice', 'cider', 'tea', 'coffee', 'cocoa',
  'mint', 'basil', 'thyme', 'sage', 'dill', 'chive', 'ginger', 'garlic', 'onion', 'carrot',
  'potato', 'tomato', 'pepper', 'celery', 'spinach', 'lettuce', 'cabbage', 'broccoli', 'squash', 'pumpkin',
  'bacon', 'ham', 'beef', 'pork', 'lamb', 'chicken', 'turkey', 'duck', 'fish', 'shrimp',
  'egg', 'milk', 'butter', 'yogurt', 'toast', 'waffle', 'pancake', 'muffin', 'cookie', 'brownie',
  'pie', 'tart', 'fudge', 'caramel', 'toffee', 'nougat', 'truffle', 'praline', 'custard', 'pudding',

  // Space/Tech (100)
  'atom', 'byte', 'chip', 'code', 'data', 'disk', 'file', 'grid', 'link', 'loop',
  'mesh', 'net', 'node', 'pixel', 'port', 'pulse', 'scan', 'sync', 'volt', 'wave',
  'beam', 'laser', 'radar', 'radio', 'signal', 'sonic', 'ultra', 'nano', 'micro', 'macro',
  'orbit', 'comet', 'meteor', 'nova', 'nebula', 'quasar', 'pulsar', 'cosmos', 'galaxy', 'stellar',
  'lunar', 'solar', 'plasma', 'photon', 'proton', 'neutron', 'electron', 'quantum', 'fusion', 'fission',
  'rocket', 'shuttle', 'probe', 'rover', 'drone', 'robot', 'android', 'cyborg', 'mech', 'bot',
  'core', 'hub', 'base', 'module', 'pod', 'cell', 'unit', 'sector', 'zone', 'realm',
  'portal', 'gateway', 'tunnel', 'warp', 'hyper', 'turbo', 'boost', 'surge', 'flux', 'field',
  'matrix', 'vector', 'tensor', 'scalar', 'prime', 'cipher', 'crypt', 'hash', 'key', 'token',
  'alpha', 'beta', 'gamma', 'delta', 'omega', 'sigma', 'theta', 'lambda', 'phi', 'psi',

  // Music/Sound (50)
  'beat', 'drum', 'bass', 'tone', 'tune', 'note', 'chord', 'tempo', 'rhythm', 'melody',
  'song', 'hymn', 'chant', 'hum', 'buzz', 'chirp', 'click', 'clap', 'snap', 'tap',
  'boom', 'bang', 'crash', 'clash', 'clang', 'ring', 'chime', 'toll', 'echo', 'sonic',
  'vocal', 'choir', 'opera', 'jazz', 'blues', 'rock', 'folk', 'pop', 'funk', 'soul',
  'piano', 'violin', 'guitar', 'flute', 'harp', 'horn', 'trumpet', 'cymbal', 'gong', 'fiddle',

  // Time/Abstract (100)
  'time', 'hour', 'minute', 'moment', 'instant', 'second', 'tick', 'tock', 'beat', 'pulse',
  'cycle', 'phase', 'stage', 'step', 'level', 'grade', 'rank', 'tier', 'class', 'type',
  'kind', 'sort', 'form', 'mode', 'style', 'trend', 'wave', 'shift', 'change', 'morph',
  'start', 'begin', 'end', 'finish', 'peak', 'top', 'bottom', 'middle', 'center', 'edge',
  'side', 'front', 'back', 'left', 'right', 'north', 'south', 'east', 'west', 'up',
  'down', 'in', 'out', 'over', 'under', 'above', 'below', 'beyond', 'within', 'between',
  'first', 'last', 'next', 'prior', 'final', 'prime', 'chief', 'main', 'major', 'minor',
  'extra', 'ultra', 'super', 'mega', 'giga', 'tera', 'peta', 'exa', 'zeta', 'yotta',
  'zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine',
  'ten', 'dozen', 'score', 'hundred', 'thousand', 'million', 'billion', 'triple', 'double', 'single',

  // Emotions/States (100)
  'joy', 'hope', 'love', 'peace', 'bliss', 'grace', 'charm', 'glee', 'mirth', 'cheer',
  'pride', 'glory', 'honor', 'fame', 'trust', 'faith', 'belief', 'dream', 'wish', 'goal',
  'quest', 'journey', 'voyage', 'trip', 'tour', 'trek', 'hike', 'roam', 'wander', 'explore',
  'wonder', 'marvel', 'magic', 'mystery', 'secret', 'puzzle', 'riddle', 'clue', 'hint', 'sign',
  'mark', 'symbol', 'emblem', 'icon', 'logo', 'seal', 'crest', 'banner', 'motto', 'creed',
  'spirit', 'soul', 'heart', 'mind', 'will', 'power', 'force', 'energy', 'vigor', 'zeal',
  'spark', 'flame', 'fire', 'blaze', 'glow', 'shine', 'light', 'ray', 'beam', 'flash',
  'bolt', 'strike', 'blast', 'burst', 'surge', 'rush', 'flow', 'stream', 'flood', 'tide',
  'drift', 'float', 'glide', 'soar', 'rise', 'lift', 'boost', 'push', 'pull', 'drive',
  'force', 'press', 'squeeze', 'grip', 'hold', 'clasp', 'clutch', 'grasp', 'seize', 'catch',

  // Misc common (398 to reach ~2048)
  'ace', 'arc', 'arm', 'art', 'ash', 'aura', 'axis', 'bane', 'bark', 'base',
  'bead', 'beak', 'beam', 'blade', 'blank', 'blast', 'blaze', 'blend', 'bless', 'blind',
  'blip', 'bliss', 'block', 'bloom', 'blow', 'blur', 'blush', 'board', 'boat', 'body',
  'bond', 'bone', 'bonus', 'boom', 'boost', 'boot', 'border', 'boss', 'bound', 'brace',
  'brain', 'branch', 'brand', 'brass', 'breach', 'break', 'breath', 'breeze', 'brew', 'brick',
  'brief', 'brim', 'brink', 'broad', 'brook', 'broom', 'brute', 'brush', 'bubble', 'buck',
  'bud', 'buff', 'bug', 'bulk', 'bump', 'bunch', 'bundle', 'burst', 'bus', 'bust',
  'buzz', 'cab', 'cache', 'cadet', 'cage', 'calm', 'canal', 'cape', 'carbon', 'cargo',
  'carol', 'carry', 'cart', 'carve', 'cast', 'cause', 'cease', 'cedar', 'cell', 'cement',
  'census', 'center', 'central', 'century', 'chain', 'chair', 'chalk', 'chamber', 'champ', 'chance',
  'chaos', 'chapel', 'chapter', 'charge', 'chart', 'chase', 'cheap', 'check', 'cheek', 'cheer',
  'chef', 'chess', 'chi', 'chief', 'child', 'chill', 'chin', 'chip', 'choice', 'chop',
  'chunk', 'circle', 'circuit', 'circus', 'citizen', 'city', 'civic', 'civil', 'claim', 'clamp',
  'clan', 'clap', 'clarity', 'clash', 'clasp', 'classic', 'clause', 'claw', 'clay', 'clean',
  'clear', 'clerk', 'clever', 'click', 'client', 'cliff', 'climax', 'climb', 'clinic', 'clip',
  'cloak', 'clock', 'clone', 'closet', 'cloth', 'cloud', 'clown', 'club', 'clue', 'cluster',
  'clutch', 'coach', 'coal', 'coast', 'coat', 'cobalt', 'cobra', 'cocoa', 'coil', 'cold',
  'collar', 'colon', 'colony', 'color', 'column', 'combat', 'combo', 'comet', 'comic', 'comma',
  'common', 'compact', 'company', 'compare', 'compass', 'complex', 'concept', 'concern', 'concert', 'conclude',
  'concrete', 'condition', 'conduct', 'cone', 'confess', 'confirm', 'conflict', 'connect', 'console', 'constant',
  'contact', 'contain', 'content', 'context', 'contract', 'control', 'convert', 'convey', 'convoy', 'cook',
  'cool', 'cope', 'copy', 'coral', 'cord', 'cork', 'corner', 'corona', 'corps', 'correct',
  'cosmic', 'cost', 'cosy', 'cotton', 'couch', 'cough', 'count', 'counter', 'country', 'county',
  'couple', 'courage', 'course', 'court', 'cousin', 'cover', 'cozy', 'crack', 'cradle', 'craft',
  'crane', 'crash', 'crater', 'crawl', 'crazy', 'create', 'creature', 'credit', 'creek', 'creep',
  'crest', 'crew', 'cricket', 'crime', 'crisp', 'critic', 'crop', 'cross', 'crowd', 'crown',
  'crude', 'cruel', 'cruise', 'crunch', 'crush', 'crust', 'cry', 'cube', 'cubic', 'cue',
  'cult', 'culture', 'cup', 'cupboard', 'cure', 'curious', 'curl', 'current', 'curse', 'curtain',
  'curve', 'cushion', 'custom', 'cute', 'cyber', 'cycle', 'cylinder', 'dagger', 'daily', 'dairy',
  'dam', 'damage', 'damp', 'dance', 'danger', 'dare', 'dart', 'dash', 'data', 'dawn',
  'deal', 'dean', 'dear', 'death', 'debate', 'debris', 'debut', 'decade', 'decay', 'decent',
  'decide', 'deck', 'declare', 'decline', 'decor', 'decree', 'dedicate', 'deed', 'deem', 'default',
  'defeat', 'defend', 'define', 'defy', 'degree', 'delay', 'delete', 'delta', 'deluxe', 'demand',
  'demo', 'demon', 'denial', 'dense', 'deny', 'depart', 'depend', 'deploy', 'deposit', 'depot',
  'depth', 'deputy', 'derive', 'descend', 'desert', 'deserve', 'design', 'desire', 'destiny', 'detail',
  'detect', 'device', 'devil', 'devote', 'dial', 'dice', 'diesel', 'diet', 'differ', 'digest',
  'digit', 'dignity', 'dilemma', 'dimension', 'dine', 'dip', 'direct', 'dirt', 'disable', 'disc'
];

// Generate 3-word code from public key bytes
export function generateFriendCode(publicKey: Uint8Array): string {
  // Use first 6 bytes of public key to select 3 words
  // Each word index uses 11 bits (0-2047)
  // Combine bytes into a 48-bit number, then extract 3 x 11-bit indices
  const b0 = publicKey[0] ?? 0;
  const b1 = publicKey[1] ?? 0;
  const b2 = publicKey[2] ?? 0;
  const b3 = publicKey[3] ?? 0;
  const b4 = publicKey[4] ?? 0;

  // First 11 bits: b0 (8) + b1 high 3 bits
  const idx1 = ((b0 << 3) | (b1 >> 5)) & 0x7FF;
  // Next 11 bits: b1 low 5 bits + b2 high 6 bits
  const idx2 = (((b1 & 0x1F) << 6) | (b2 >> 2)) & 0x7FF;
  // Next 11 bits: b2 low 2 bits + b3 (8) + b4 high 1 bit
  const idx3 = (((b2 & 0x03) << 9) | (b3 << 1) | (b4 >> 7)) & 0x7FF;

  const word1 = WORDLIST[idx1 % WORDLIST.length];
  const word2 = WORDLIST[idx2 % WORDLIST.length];
  const word3 = WORDLIST[idx3 % WORDLIST.length];

  return `${word1}-${word2}-${word3}`;
}

// Parse friend code back to indices (for lookup)
export function parseFriendCode(code: string): string[] | null {
  const words = code.toLowerCase().split('-');
  if (words.length !== 3) return null;

  const valid = words.every(w => WORDLIST.includes(w));
  if (!valid) return null;

  return words;
}

// Validate a friend code format
export function isValidFriendCode(code: string): boolean {
  return parseFriendCode(code) !== null;
}

// Generate temporary 6-digit device pairing code
export function generateDeviceCode(): string {
  const code = Math.floor(100000 + Math.random() * 900000);
  return code.toString();
}

// Format device code with space for readability: "582 941"
export function formatDeviceCode(code: string): string {
  if (code.length !== 6) return code;
  return `${code.slice(0, 3)} ${code.slice(3)}`;
}
